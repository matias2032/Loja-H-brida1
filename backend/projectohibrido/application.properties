# ===================================
# CONFIGURAÇÕES DO BANCO DE DADOS POSTGRESQL
# ===================================
# IMPORTANTE: Substitua pelos seus dados reais

# URL de conexão com o banco
# Formato: jdbc:postgresql://[HOST]:[PORTA]/[NOME_DO_BANCO]
spring.datasource.url=jdbc:postgresql://localhost:5432/db_loja

# Usuário do PostgreSQL
spring.datasource.username=postgres

# Senha do PostgreSQL
spring.datasource.password=hx1232

# Driver JDBC do PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================
# CONFIGURAÇÕES DO JPA/HIBERNATE
# ===================================
# Dialeto do PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Estratégia de geração do schema
# validate = valida o schema (use depois de criar as tabelas)
# update = atualiza o schema automaticamente (NÃO RECOMENDADO EM PRODUÇÃO)
# create = cria o schema sempre que inicia (APAGA DADOS!)
# create-drop = cria e depois apaga ao fechar
spring.jpa.hibernate.ddl-auto=validate

# Mostra os comandos SQL no console (útil para debug)
spring.jpa.show-sql=true

# Formata o SQL no console (mais legível)
spring.jpa.properties.hibernate.format_sql=true

# Corrige problema com tipos LOB no PostgreSQL
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Desativa warning de metadata obsoleta
spring.jpa.open-in-view=false

# ===================================
# CONFIGURAÇÕES DO SERVIDOR
# ===================================
# Porta do servidor (padrão 8080)
server.port=8080

# Contexto da aplicação (URL base)
server.servlet.context-path=/

# ===================================
# CONFIGURAÇÕES DE ENCODING
# ===================================
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# ===================================
# CONFIGURAÇÕES DE TIMEZONE E DATA
# ===================================
# Ajuste para Moçambique (Africa/Maputo)
spring.jackson.time-zone=Africa/Maputo
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss

# ===================================
# CONFIGURAÇÕES DE LOG
# ===================================
# Nível de log geral
logging.level.root=INFO

# Log da aplicação (debug para desenvolvimento)
logging.level.com.loja1.projectohibrido=DEBUG
# Log SQL do Hibernate
logging.level.org.hibernate.SQL=DEBUG

# Log dos parâmetros SQL (mostra valores dos placeholders ?)
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log do Spring Security (útil para debug de autenticação)
logging.level.org.springframework.security=DEBUG

# ===================================
# CONFIGURAÇÕES DE SEGURANÇA
# ===================================
# TEMPORÁRIO: Desabilita segurança para testar endpoints
# REMOVA EM PRODUÇÃO!
spring.security.user.name=admin
spring.security.user.password=admin

# ===================================
# CONFIGURAÇÕES DE CORS (Cross-Origin)
# ===================================
# Permitir requisições do Flutter (ajuste conforme necessário)
# Esta configuração será sobrescrita pelo @CrossOrigin no Controller

# ===================================
# CONFIGURAÇÕES DE POOL DE CONEXÕES
# ===================================
# Número máximo de conexões ativas
spring.datasource.hikari.maximum-pool-size=10

# Tempo máximo de espera por conexão (ms)
spring.datasource.hikari.connection-timeout=20000

# Tempo de vida máximo de uma conexão (ms)
spring.datasource.hikari.max-lifetime=1800000

# Tempo de inatividade antes de fechar conexão (ms)
spring.datasource.hikari.idle-timeout=600000

# ===================================
# CONFIGURAÇÕES DE VALIDAÇÃO
# ===================================
# Ativa validação de beans
spring.jpa.properties.javax.persistence.validation.mode=auto

# ===================================
# NOTAS IMPORTANTES
# ===================================
# 1. NUNCA commite senhas reais no Git!
# 2. Use variáveis de ambiente em produção:
#    spring.datasource.url=${DB_URL}
#    spring.datasource.username=${DB_USERNAME}
#    spring.datasource.password=${DB_PASSWORD}
# 
# 3. Para ambiente de produção, altere:
#    spring.jpa.show-sql=false
#    logging.level.com.loja1=INFO
#    spring.jpa.hibernate.ddl-auto=validate